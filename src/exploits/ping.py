import sys
import subprocess
from Webcrawler import WebCrawler

colors = {
    'BLUE': '\33[1;94m',
    'RED': '\033[1;91m',
    'WHITE': '\33[1;97m',
    'YELLOW': '\33[1;93m',
    'MAGENTA': '\033[1;35m',
    'GREEN': '\033[1;32m',
    'END': '\033[0m',
}


# class has some issues
class Ping(WebCrawler):

    # Facing a few issues, still got problems
    global colors

    def __init__(self, ipAddr):
        self.ipAddr = ipAddr

    def pingScan(self):
        print(colors["BLUE"], "Scanning {}".format(self.ipAddr), colors["END"])

        process = subprocess.Popen(["/bin/ping", "-c 1 ", self.ipAddr], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        stdout, stderr = subprocess.communicate(input=None)

        if "bytes from " in stdout:
            print(colors["YELLOW"], "The IP Address {} has responded with an Echo Reply".format(stdout.split()[1]), colors["END"])
        else:
            print(colors["RED"], "No Echo Response!", colors["END"])
            sys.exit()
